import nimcrypto

var 
  aliceKey = "Alice Key"
  aliceData = ""
  aliceIv = "0123456789ABCDEF"

  dctx: CTR[aes256]
  key = newString(aes256.sizeKey)
  iv = newString(aes256.sizeBlock)
  # We do not need to pad data, `CTR` mode works byte by byte.
  plainText = newString(len(aliceData))

  encText = newString(len(aliceData))

copyMem(addr plainText[0], addr aliceData[0], len(aliceData))

copyMem(addr key[0], addr aliceKey[0], len(aliceKey))

copyMem(addr iv[0], addr aliceIv[0], len(aliceIv))


dctx.init(key, iv)

dctx.decrypt(encText, plainText)

dctx.clear()

echo "ENCRYPTED TEXT: ", $plainText
